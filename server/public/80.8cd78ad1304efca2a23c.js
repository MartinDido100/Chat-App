"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[80],{1080:(Q,m,c)=>{c.r(m),c.d(m,{ChatModule:()=>L});var d=c(8583),g=c(1643),e=c(8186),f=c(1584),_=c(1323),l=c(6518),u=c(6470),p=c(2978);let C=(()=>{class n{constructor(t,s,o,a,h,j){this.router=t,this.cS=s,this.gS=o,this.aS=a,this.chS=h,this.socket=j}get user(){return this.aS.user}ngOnInit(){this.chS.getLastsMsgs(this.user.userId),this.socket.emit("login",{username:this.user.username,userId:this.user.userId})}getCssClass(t){return this.router.url.includes(t)?"active":""}logout(){this.socket.emit("logout",{userToLogout:this.user}),this.gS.authState.subscribe(t=>{t&&this.gS.signOut(!1)}),this.chS.resetArrays(),this.cS.delete("token"),this.cS.deleteAll("/"),this.router.navigateByUrl("/auth/login")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(f.N),e.Y36(_.xE),e.Y36(l.e),e.Y36(u.a),e.Y36(p.sk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-layout"]],decls:12,vars:6,consts:[[1,"main"],[1,"sidebar"],["routerLink","/homepage/chats",1,"sidebar-button"],[1,"fas","fa-comment-alt"],["routerLink","/homepage/search",1,"sidebar-button"],[1,"fas","fa-search"],["routerLink","/homepage/profile",1,"sidebar-button"],[1,"fas","fa-user"],[1,"sidebar-button","logout",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"container"]],template:function(t,s){1&t&&(e.TgZ(0,"main",0),e.TgZ(1,"aside",1),e.TgZ(2,"a",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"a",4),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"a",6),e._UZ(7,"i",7),e.qZA(),e.TgZ(8,"a",8),e.NdJ("click",function(){return s.logout()}),e._UZ(9,"i",9),e.qZA(),e.qZA(),e.TgZ(10,"div",10),e._UZ(11,"router-outlet"),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Tol(s.getCssClass("chats")),e.xp6(2),e.Tol(s.getCssClass("search")),e.xp6(2),e.Tol(s.getCssClass("profile")))},directives:[g.yS,g.lC],styles:[".main[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;background:#202442;padding:1em;grid-gap:1.5em;gap:1.5em}@media screen and (max-width: 845px){.main[_ngcontent-%COMP%]{flex-direction:column}}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:7em;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;grid-gap:6em;gap:6em;background:#25294a;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}@media screen and (max-width: 845px){.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{grid-gap:0;gap:0;justify-content:space-between;padding:1em 8%;flex-direction:row;width:100%}}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .sidebar-button[_ngcontent-%COMP%]{width:3em;height:3em;color:#514a7b;border-radius:10px;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#406ae0;color:#eee}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{transition:all .1s ease-in;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-ms-transition:all .1s ease-in;-o-transition:all .1s ease-in}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]:hover{background:#406ae0;color:#eee}i[_ngcontent-%COMP%]{font-size:1.5em}.container[_ngcontent-%COMP%]{height:100%;width:100%}@media screen and (max-width: 845px){.container[_ngcontent-%COMP%]{height:calc(100% - 7em)}}"]}),n})();var r=c(665);let x=(()=>{class n{transform(t){const s=Intl.DateTimeFormat().resolvedOptions().locale;return new Date(t).toLocaleString(s,{day:"numeric",month:"numeric",year:"numeric"})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"myDate",type:n,pure:!0}),n})(),b=(()=>{class n{transform(t){const s=Intl.DateTimeFormat().resolvedOptions().locale;return new Date(t).toLocaleString(s,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"time",type:n,pure:!0}),n})();const M=["chatBox"];function O(n,i){if(1&n&&(e.TgZ(0,"li"),e.TgZ(1,"p",11),e._uU(2),e.qZA(),e.TgZ(3,"span",12),e.TgZ(4,"span",13),e._uU(5),e.ALo(6,"myDate"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.ALo(9,"time"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=i.$implicit,s=e.oxw();e.Tol(s.getMsgType(t.enviadoPor)),e.xp6(2),e.Oqu(t.contenido),e.xp6(3),e.Oqu(e.lcZ(6,5,t.updatedAt)),e.xp6(3),e.Oqu(e.lcZ(9,7,t.updatedAt))}}function P(n,i){1&n&&e._UZ(0,"div",15)}function v(n,i){1&n&&e._UZ(0,"div",16)}let Z=(()=>{class n{constructor(t,s,o){this.cS=t,this.aS=s,this.socket=o,this.messageInput="",this.conversation=[],this.loading=!1}get user(){return this.aS.user}ngAfterViewChecked(){this.scrollToBottom()}ngOnChanges(t){this.conversation=[],this.getConver()}getMsgType(t){return t===this.user.userId?"msg_li msg_sent":"msg_li msg_recieved"}getConver(){this.loading=!0,this.cS.getConver(this.user.userId,this.friend.userId).subscribe(t=>{this.conversation=t,this.loading=!1})}sendMsg(){0!==this.messageInput.length&&(this.cS.addMsg(this.user.userId,this.friend.userId,this.messageInput).subscribe(t=>{this.conversation.push(t),this.socket.emit("sendMessage",{message:t,friendId:this.friend.userId,sentFrom:this.user.userId})}),this.messageInput="")}scrollToBottom(){try{this.chatBox.nativeElement.scrollTop=this.chatBox.nativeElement.scrollHeight}catch(t){}}ngOnInit(){this.scrollToBottom(),this.socket.on("messageReceived",t=>{t.sentFrom===this.friend.userId&&this.conversation.push(t.message),this.cS.updateLastMsg(t.sentFrom,t.message)}),this.socket.on("messageReceivedOffline",()=>{this.cS.updateNewMsgOffline(this.user.userId,this.friend.userId).subscribe()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.a),e.Y36(l.e),e.Y36(p.sk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat-simple"]],viewQuery:function(t,s){if(1&t&&e.Gf(M,5),2&t){let o;e.iGM(o=e.CRH())&&(s.chatBox=o.first)}},inputs:{friend:"friend"},features:[e.TTD],decls:11,vars:4,consts:[[1,"simple-chat"],[1,"messages_ul"],["chatBox",""],[3,"class",4,"ngFor","ngForOf"],[1,"text-bar"],["autocomplete","off",3,"ngSubmit"],["type","text","placeholder","Send a message...","name","messageInput",1,"text-input",3,"ngModel","ngModelChange"],["type","submit"],[1,"fas","fa-paper-plane"],["class","spinner",4,"ngIf"],["class","bg-spinner",4,"ngIf"],[1,"message"],[1,"time"],[1,"date"],[1,"hour"],[1,"spinner"],[1,"bg-spinner"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"ul",1,2),e.YNc(3,O,10,9,"li",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"form",5),e.NdJ("ngSubmit",function(){return s.sendMsg()}),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(a){return s.messageInput=a}),e.qZA(),e.TgZ(7,"button",7),e._UZ(8,"i",8),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,P,1,0,"div",9),e.YNc(10,v,1,0,"div",10),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",s.conversation),e.xp6(3),e.Q6J("ngModel",s.messageInput),e.xp6(3),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.loading))},directives:[d.sg,r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,d.O5],pipes:[x,b],styles:[".simple-chat[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end}.simple-chat[_ngcontent-%COMP%]   .text-bar[_ngcontent-%COMP%]{width:100%}.simple-chat[_ngcontent-%COMP%]   .text-bar[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;grid-gap:.5em;gap:.5em;width:100%}.simple-chat[_ngcontent-%COMP%]   .text-bar[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{flex-grow:1;border:2px solid #222;width:92%;padding:.8em;background:#eee;outline:none;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}.simple-chat[_ngcontent-%COMP%]   .text-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 .5em;cursor:pointer;background:none;outline:none;border:none;color:var(--primary)}.simple-chat[_ngcontent-%COMP%]   .text-bar[_ngcontent-%COMP%]   .fa-paper-plane[_ngcontent-%COMP%]{font-size:2rem}.simple-chat[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#999db4}@media screen and (max-width: 400px){.simple-chat[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{flex-direction:row;grid-gap:.8em;gap:.8em}}.simple-chat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.simple-chat[_ngcontent-%COMP%]   .messages_ul[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;overflow-y:scroll;grid-gap:2em;gap:2em;padding-bottom:1em}.simple-chat[_ngcontent-%COMP%]   .messages_ul[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.simple-chat[_ngcontent-%COMP%]   .msg_li[_ngcontent-%COMP%]{align-items:center;display:flex;grid-gap:1.5em;gap:1.5em;justify-content:space-between;width:70%;max-width:300px;background:var(--primary);padding:1em;border-radius:10px;color:#eee;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}@media screen and (max-width: 400px){.simple-chat[_ngcontent-%COMP%]   .msg_li[_ngcontent-%COMP%]{align-items:flex-start;flex-direction:column;grid-gap:.8em;gap:.8em}}.simple-chat[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{overflow-wrap:anywhere}.simple-chat[_ngcontent-%COMP%]   .msg_sent[_ngcontent-%COMP%]{align-self:flex-end}.simple-chat[_ngcontent-%COMP%]   .msg_recieved[_ngcontent-%COMP%]{background:var(--secondary)}.bg-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0em;width:95%;height:93%;background:#00000028;z-index:10;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}.spinner[_ngcontent-%COMP%]{position:absolute;left:0em;right:0;top:0;bottom:0;margin:auto;z-index:100;align-self:center;border:8px solid rgba(0,0,0,.1);width:70px;height:70px;border-radius:50%;border-left-color:#eee;animation:spin 1s ease infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),n})();function w(n,i){if(1&n&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&n){const t=e.oxw().index,s=e.oxw();e.xp6(1),e.Oqu(s.nuevosMsg[t].nuevosMsg)}}function T(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().chargeClickedFriend(a)}),e.TgZ(1,"p",5),e._uU(2),e.qZA(),e.TgZ(3,"p",6),e._uU(4),e.qZA(),e.YNc(5,w,2,1,"div",7),e.qZA()}if(2&n){const t=i.$implicit,s=i.index,o=e.oxw();e.Tol(o.getCssClass(t.username)),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu((null==o.lastMsg[s]?null:o.lastMsg[s].message)||"Aun no hay mensajes..."),e.xp6(1),e.Q6J("ngIf",o.nuevosMsg[s].nuevosMsg>0)}}function y(n,i){if(1&n&&e._UZ(0,"app-chat-simple",9),2&n){const t=e.oxw();e.Q6J("friend",t.clickedFriend)}}function k(n,i){1&n&&(e.TgZ(0,"div",6),e.TgZ(1,"h3",7),e._uU(2,"You don't have any friend"),e.qZA(),e.qZA())}function A(n,i){if(1&n&&(e.TgZ(0,"div",10),e.TgZ(1,"h3",11),e._uU(2),e.qZA(),e.qZA()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.username)}}function F(n,i){if(1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"h3",7),e._uU(2,"Your Friends:"),e.qZA(),e.YNc(3,A,3,1,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.friends)}}function q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"i",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().addFriend(o)}),e.qZA(),e.qZA()}}function Y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"i",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().deleteFriend(o)}),e.qZA(),e.qZA()}}function J(n,i){if(1&n&&(e.TgZ(0,"li"),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,q,2,0,"div",9),e.YNc(4,Y,2,0,"div",9),e.qZA()),2&n){const t=i.$implicit,s=e.oxw();e.Tol(s.getLiClass(t)),e.xp6(2),e.Oqu(t.username),e.xp6(1),e.Q6J("ngIf",s.isNotFriend(t.username)),e.xp6(1),e.Q6J("ngIf",!s.isNotFriend(t.username))}}function N(n,i){if(1&n&&(e.TgZ(0,"li",13),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("No results for ",t.busqueda,"")}}const U=[{path:"",component:C,children:[{path:"chats",component:(()=>{class n{constructor(t,s,o){this.aS=t,this.chS=s,this.socket=o,this.chatActivo="",this.clickedFriend={username:"",userId:""},this.friendsA=[]}getCssClass(t){return this.chatActivo===t?"chat active-chat":"chat"}chargeClickedFriend(t){this.clickedFriend=t,this.chatActivo=t.username;const s=t.newMsgA.findIndex(a=>a.friend===this.user.userId);t.newMsgA[s].numberOfMsgs>0&&this.chS.resetNewMsgOffline(t.userId,this.user.userId).subscribe();const o=this.nuevosMsg.findIndex(a=>a.friend===t.userId);this.nuevosMsg[o].nuevosMsg>0&&this.chS.resetNuevosMsg(t.userId)}get user(){return this.aS.user}get userFriends(){return this.chS.friends}get nuevosMsg(){return this.chS.nuevosMsgCount}get lastMsg(){return this.chS.lastMsgs}ngOnInit(){this.socket.removeListener("teEliminaron"),this.socket.removeListener("teAgregaron"),this.socket.removeListener("messageReceived"),this.socket.on("teAgregaron",t=>{this.chS.updateFriends(t.friend)}),this.socket.on("teEliminaron",t=>{this.chS.deleteFriendA(t.friend),t.friend.userId===this.clickedFriend.userId&&(this.clickedFriend={username:"",userId:""},this.chatActivo="")}),this.socket.on("messageReceived",t=>{t.sentFrom!==this.clickedFriend.userId&&(this.chS.updateLastMsg(t.sentFrom,t.message),this.chS.updateNuevosMsg(t.sentFrom))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.e),e.Y36(u.a),e.Y36(p.sk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chats"]],decls:4,vars:2,consts:[[1,"chats-cont"],[1,"chat-select"],[3,"class","click",4,"ngFor","ngForOf"],[3,"friend",4,"ngIf"],[3,"click"],[1,"chat-name"],[1,"chat-latest-message"],["class","chat-messages-number",4,"ngIf"],[1,"chat-messages-number"],[3,"friend"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,T,6,5,"div",2),e.qZA(),e.YNc(3,y,1,1,"app-chat-simple",3),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",s.userFriends),e.xp6(1),e.Q6J("ngIf",s.chatActivo))},directives:[d.sg,d.O5,Z],styles:[".chats-cont[_ngcontent-%COMP%]{height:100%;display:flex;grid-gap:.5em;gap:.5em;width:100%;padding:2em;border-radius:10px;background:#25294a;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}@media screen and (max-width: 1165px){.chats-cont[_ngcontent-%COMP%]{flex-direction:column}}@media screen and (max-width: 400px){.chats-cont[_ngcontent-%COMP%]{padding:.7em}}.chats-cont[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{width:23%;display:flex;grid-gap:1em;gap:1em;flex-direction:column}@media screen and (max-width: 1165px){.chats-cont[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{width:100%;flex-direction:row;overflow-x:scroll;height:4em}.chats-cont[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}}@media screen and (max-width: 400px){.chats-cont[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{height:3em}}.chats-cont[_ngcontent-%COMP%]   app-chat-simple[_ngcontent-%COMP%]{flex-grow:1;height:100%}@media screen and (max-width: 1165px){.chats-cont[_ngcontent-%COMP%]   app-chat-simple[_ngcontent-%COMP%]{height:88%}}.chats-cont[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;color:#f5f5f7;display:flex;flex-direction:column;justify-content:center;width:100%;padding:1em 1.2em;background:#514a7b;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}@media screen and (max-width: 1165px){.chats-cont[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{height:100%;width:15em;padding:0 1em}}@media screen and (max-width: 845px){.chats-cont[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{width:8em}}@media screen and (max-width: 845px){.chats-cont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem}}.chats-cont[_ngcontent-%COMP%]   .chat-latest-message[_ngcontent-%COMP%]{color:#999db4;text-overflow:ellipsis;max-width:20em;overflow:hidden;display:block;white-space:nowrap}.chats-cont[_ngcontent-%COMP%]   .chat-messages-number[_ngcontent-%COMP%]{text-align:center;line-height:1.2em;align-self:flex-end;width:1.2em;height:1.2em;background:#f65164;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%}.chats-cont[_ngcontent-%COMP%]   .active-chat[_ngcontent-%COMP%]{background:var(--primary)}"]}),n})()},{path:"profile",component:(()=>{class n{constructor(t,s){this.chS=t,this.aS=s}get friends(){return this.chS.friends}get user(){return this.aS.user}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.a),e.Y36(l.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-perfil"]],decls:11,vars:6,consts:[[1,"profile-cont"],[1,"card"],[1,"username"],[1,"email"],["class","no-friends",4,"ngIf"],["class","friends",4,"ngIf"],[1,"no-friends"],[1,"friends__h3"],[1,"friends"],["class","friend",4,"ngFor","ngForOf"],[1,"friend"],[1,"friend__name"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1"),e._uU(4),e.ALo(5,"titlecase"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"h2"),e._uU(8),e.qZA(),e.qZA(),e.YNc(9,k,3,0,"div",4),e.YNc(10,F,4,1,"div",5),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("Username: ",e.lcZ(5,4,s.user.username),""),e.xp6(4),e.hij("Email: ",s.user.email,""),e.xp6(1),e.Q6J("ngIf",0===s.friends.length),e.xp6(1),e.Q6J("ngIf",s.friends.length>0))},directives:[d.O5,d.sg],pipes:[d.rS],styles:[".profile-cont[_ngcontent-%COMP%]{color:#eee;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.profile-cont[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{text-align:center;padding:2.5em 0;background:#514a7b;border-radius:10px;width:90%;max-width:43em;display:flex;flex-direction:column;grid-gap:1em;gap:1em;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px}.profile-cont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(.1rem,6vw,2.5rem);line-height:1em;white-space:nowrap}.profile-cont[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(.1rem,4vw,1.5rem);line-height:2em;white-space:nowrap}.profile-cont[_ngcontent-%COMP%]   .friends[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:.5em;gap:.5em}.profile-cont[_ngcontent-%COMP%]   .friends__h3[_ngcontent-%COMP%], .profile-cont[_ngcontent-%COMP%]   .friend__name[_ngcontent-%COMP%]{font-size:clamp(.1rem,3vw,1.2rem);white-space:nowrap}"]}),n})()},{path:"search",component:(()=>{class n{constructor(t,s,o){this.cS=t,this.aS=s,this.socket=o,this.busqueda="",this.suggestions=[],this.noResults=!1}get user(){return this.aS.user}get friends(){return this.cS.friends}isNotFriend(t){return-1===this.friends.findIndex(s=>s.username===t)}getLiClass(t){return t.username===this.user.username?"disabled":"suggestions_li"}addFriend(t){this.cS.addFriend(this.user.userId,t).subscribe(),this.socket.emit("agregarAmigo",{friend:this.user,userToSend:t.userId})}deleteFriend(t){this.cS.deleteFriend(this.user.userId,t).subscribe(),this.socket.emit("eliminarAmigo",{friend:this.user,userToSend:t.userId})}buscar(){this.busqueda?setTimeout(()=>{this.cS.searchUser(this.busqueda).subscribe(t=>{this.suggestions=t,this.noResults=!1,0===this.suggestions.length&&(this.noResults=!0)})},300):(this.noResults=!1,this.suggestions=[])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.a),e.Y36(l.e),e.Y36(p.sk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search"]],decls:10,vars:3,consts:[[1,"search_cont"],[1,"search_title"],[1,"searchbar"],["autocomplete","off"],["type","text","name","busquedaUser","placeholder","Search a user...",1,"searchbar_input",3,"ngModel","ngModelChange","input"],[1,"suggestions"],[1,"suggestions_ul"],[3,"class",4,"ngFor","ngForOf"],["class","suggestions_li",4,"ngIf"],["class","addFriend",4,"ngIf"],[1,"addFriend"],[1,"fas","fa-user-plus","search-icon",3,"click"],[1,"fas","fa-user-times","search-icon",3,"click"],[1,"suggestions_li"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3",1),e._uU(2,"Search an username to add as friend or delete it:"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(a){return s.busqueda=a})("input",function(){return s.buscar()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"ul",6),e.YNc(8,J,5,5,"li",7),e.YNc(9,N,3,1,"li",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngModel",s.busqueda),e.xp6(3),e.Q6J("ngForOf",s.suggestions),e.xp6(1),e.Q6J("ngIf",s.noResults))},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,d.sg,d.O5],styles:[".search_title[_ngcontent-%COMP%]{font-size:clamp(.8em,3.7vw,2em);white-space:nowrap;color:#eee}.search_cont[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;grid-gap:2em;gap:2em}.search_cont[_ngcontent-%COMP%]   .searchbar[_ngcontent-%COMP%]{width:90%;max-width:60em}.search_cont[_ngcontent-%COMP%]   .searchbar_input[_ngcontent-%COMP%]{width:100%;border-radius:10px 10px 0 0;border:2px solid #222;border-bottom:none;background:#eee;outline:none;padding:.8em;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;-ms-border-radius:10px 10px 0 0;-o-border-radius:10px 10px 0 0}.search_cont[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]{width:100%}.search_cont[_ngcontent-%COMP%]   .suggestions_ul[_ngcontent-%COMP%]{border:2px solid #222;background:var(--primary);width:100%;list-style:none;padding:0;margin:0;display:flex;flex-direction:column;border-radius:0 0 10px 10px;-webkit-border-radius:0 0 10px 10px;-moz-border-radius:0 0 10px 10px;-ms-border-radius:0 0 10px 10px;-o-border-radius:0 0 10px 10px}.search_cont[_ngcontent-%COMP%]   .suggestions_li[_ngcontent-%COMP%]{color:#eee;display:flex;justify-content:space-between;border-bottom:2px solid #222;padding:1.5em 2em}.search_cont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em}.search_cont[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5em}.disabled[_ngcontent-%COMP%]{display:none}"]}),n})()},{path:"**",redirectTo:"chats"}]}];let z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,z,r.u5,r.UX]]}),n})()}}]);